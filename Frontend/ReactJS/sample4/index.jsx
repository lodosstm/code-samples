import React, {Component} from 'react';

class RatingStars extends Component {
  render() {
    const {starWidth, 
		   starHeight,
		   offset, 
		   rating,
		   starsAmount,
		   lineId}  = this.props;
    const starLineId = "stars-line-" + lineId;
    const maskId = "mask-" + lineId;
    const bgId = "bg-" + lineId;
    const maskWidth = starWidth * rating + Math.floor(rating) * offset;
    const svgWidth = ((starWidth * starsAmount) + (offset * (starsAmount - 1)) + 2);

    let stars = [];
    let star = {};

    for (let i = 0; i < starsAmount; i += 1) {
      star = {
        x: (i * (starWidth + offset)),
        y: 0
      };
      stars.push(star);
    }
    console.log(stars);
    return (
        <div className="stars">
          <svg width={svgWidth} height={starHeight}>
            <defs>
              <symbol id="star" viewBox="0 0 18 18">
                <path
                    d="M18,7.30236794 C17.898909,7.70188221 17.7106707,8.06010929 17.4463237,8.35822708 C16.9821186,8.88221008 16.4946743,9.38312083 16.0124588,9.88949605 C15.5807888,10.3436551 15.142728,10.7911354 14.7087341,11.2428658 C14.4298625,11.5324833 14.3276096,11.8791743 14.3897747,12.2847602 C14.511781,13.0795386 14.6250726,13.8761384 14.7523078,14.6703097 C14.8603705,15.3472981 14.978891,16.0230723 14.9388032,16.7134183 C14.9155639,17.1086825 14.8475889,17.4990893 14.5280485,17.763813 C14.4019753,17.8688525 14.2363953,17.9222829 14.0894068,18 L13.6577368,18 C13.3753793,17.9083182 13.0790782,17.8482089 12.8135692,17.7188828 C12.2070234,17.424408 11.6161642,17.095932 11.0189142,16.7802064 C10.4774385,16.4930176 9.93886773,16.2009715 9.39390614,15.9210686 C9.16499903,15.8032787 8.91924343,15.7625987 8.67058292,15.8627808 C8.46142922,15.9477838 8.24762765,16.0248937 8.04835066,16.1305404 C7.25530953,16.5519126 6.4692402,16.9878567 5.67678007,17.4086217 C5.19340262,17.6654523 4.69666258,17.8846387 4.14705313,17.9404979 C3.57362339,17.9981785 3.13672455,17.6624165 3.02052805,17.0722526 C2.93163773,16.619915 2.94616229,16.1633273 3.00716545,15.7128112 C3.09547479,15.0643594 3.221548,14.4219794 3.32321993,13.7759563 C3.41152928,13.2185792 3.4905429,12.6593807 3.56607062,12.1001821 C3.60383448,11.8221008 3.54806016,11.5622344 3.36911755,11.3418336 C3.27964625,11.2307225 3.1983087,11.1117183 3.10012265,11.0097146 C2.52320702,10.4098361 1.93815764,9.8184578 1.36472791,9.21493625 C0.805241753,8.62659381 0.22484023,8.05100182 0,7.21190043 L0,6.88160291 C0.0830804984,6.72070431 0.142921696,6.53916211 0.253308373,6.40255009 C0.535665871,6.05343048 0.942934607,5.90649666 1.34787941,5.82149362 C2.08747014,5.66545234 2.83809954,5.56466302 3.58466206,5.43715847 C4.15983474,5.33940498 4.73558841,5.24104432 5.30901814,5.13236187 C5.5495449,5.08682453 5.74591698,4.94899818 5.87024724,4.72495446 C6.08056291,4.34486946 6.2932025,3.96478446 6.4860887,3.57437766 C6.84339294,2.85063752 7.16700019,2.10868245 7.54231489,1.39526412 C7.85023562,0.808743169 8.19359628,0.233758349 8.85649732,0 L9.1725518,0 C9.26086115,0.037037037 9.35149442,0.0686095932 9.43747983,0.111111111 C9.80466077,0.292046145 10.0550642,0.611414693 10.2467885,0.95992714 C10.592473,1.58773528 10.8969079,2.23982999 11.2158673,2.88281724 C11.5133303,3.48148148 11.8038216,4.08378871 12.1030276,4.68123862 C12.2389775,4.95446266 12.4591698,5.12689739 12.7502421,5.18032787 C13.4375444,5.30783242 14.1271706,5.42380085 14.8150539,5.55009107 C15.4506488,5.66727383 16.0914725,5.76563449 16.7183526,5.92167577 C17.2755148,6.06010929 17.7983991,6.29265331 18,6.9417122 L18,7.30236794 Z"
                    id="Fill-1-Copy-4" fill="#555555"/>
                <path
                    d="M17,7.49099373 C16.9101414,7.84611752 16.7428184,8.16454159 16.5078433,8.42953518 C16.0952166,8.89529785 15.6619327,9.34055185 15.2332968,9.79066316 C14.8495901,10.1943601 14.4602027,10.5921204 14.0744303,10.9936585 C13.8265444,11.2510963 13.735653,11.559266 13.7909109,11.9197868 C13.8993609,12.6262565 14.0000646,13.3343453 14.1131625,14.0402752 C14.2092183,14.6420428 14.3145698,15.2427309 14.2789362,15.8563719 C14.258279,16.2077177 14.1978568,16.554746 13.9138209,16.790056 C13.8017559,16.8834244 13.6545736,16.9309182 13.5239171,17 L13.1402104,17 C12.889226,16.918505 12.6258473,16.8650745 12.3898393,16.7501181 C11.8506875,16.4883627 11.3254793,16.196384 10.7945904,15.9157391 C10.3132787,15.6604601 9.83454909,15.4008635 9.35013879,15.152061 C9.14666581,15.0473588 8.92821638,15.0111988 8.70718482,15.1002496 C8.52127042,15.1758079 8.33122458,15.24435 8.15408947,15.3382581 C7.44916403,15.7128112 6.75043574,16.1003171 6.04602673,16.4743304 C5.61635789,16.7026243 5.17481118,16.8974567 4.68626945,16.9471092 C4.17655413,16.9983809 3.7881996,16.6999258 3.68491382,16.1753356 C3.6059002,15.7732578 3.61881092,15.367402 3.67303596,14.9669433 C3.75153315,14.3905417 3.86359822,13.8195372 3.95397327,13.2452945 C4.03247047,12.7498482 4.1027048,12.2527828 4.16984055,11.7557175 C4.20340843,11.508534 4.15383126,11.2775417 3.99477116,11.0816299 C3.91524111,10.9828645 3.84294106,10.8770829 3.75566458,10.786413 C3.24285069,10.2531876 2.72280679,9.72751805 2.21309147,9.19105444 C1.71577045,8.66808338 1.19985798,8.15644606 1,7.41057816 L1,7.11698037 C1.07384933,6.97395939 1.12704151,6.81258854 1.225163,6.69115564 C1.47614744,6.38082709 1.8381641,6.25021925 2.19811503,6.174661 C2.85552902,6.03595763 3.52275515,5.94636713 4.18636628,5.83302975 C4.69763088,5.74613776 5.20941192,5.65870606 5.71912724,5.56209944 C5.9329288,5.5216218 6.10748176,5.39910949 6.21799755,5.19995952 C6.40494481,4.86210619 6.59395778,4.52425285 6.76541217,4.17722458 C7.08301594,3.53390002 7.37066684,2.8743844 7.7042799,2.24023477 C7.97798722,1.71888282 8.28319669,1.2077852 8.87244206,1 L9.15337938,1 C9.23187657,1.03292181 9.31243948,1.06098631 9.38887096,1.09876543 C9.71525402,1.25959657 9.93783487,1.54347973 10.1082564,1.85326857 C10.4155316,2.41132025 10.6861403,2.99095999 10.9696598,3.56250422 C11.2340714,4.09465021 11.4922858,4.63003441 11.7582467,5.16110099 C11.8790911,5.40396681 12.0748176,5.55724212 12.3335485,5.60473588 C12.9444839,5.71807326 13.557485,5.82115631 14.1689368,5.93341429 C14.73391,6.03757674 15.3035311,6.12500843 15.8607579,6.2637118 C16.3560132,6.38676381 16.8207992,6.59346961 17,7.17041085 L17,7.49099373 Z"
                    id="Fill-1-Copy-4" fill="#FFFFFF"/>

              </symbol>
            </defs>
            <symbol id={starLineId}>
              <g>
                {stars.map(item => (
                    <use xlinkHref="#star" x={item.x} y={item.y} width={starWidth} height={starHeight}
                         key={_.uniqueId()}/>
                ))
                };
              </g>
            </symbol>
            <symbol id={bgId}>
              <rect fill={"#00B2AA"} x="0" y="0" width="100%" height={starHeight}/>
            </symbol>
            <mask id={maskId}>
              <use xlinkHref={'#' + starLineId}/>
            </mask>
            <g>
              <use xlinkHref={'#' + starLineId} height={starHeight}></use>
            </g>
            <g mask={'url(#' + maskId + ')'}>
              <use xlinkHref={'#' + bgId} x={0} width={maskWidth}></use>
            </g>
          </svg>
        </div>
    );
  }
}

export default RatingStars;